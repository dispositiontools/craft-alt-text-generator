{# @var plugin \dispositiontools\craftalttextgenerator\AltTextGenerator #}
{# @var settings \dispositiontools\craftalttextgenerator\models\Settings #}

{% import '_includes/forms.twig' as forms %}

{# ... #}

{#
{{ forms.textField({
	label:         "AltText.ai API Key"|t,
	id:            'apiKey',
	name:          'apiKey',
	instructions: 'Please click "Refresh credits count" in the utility page after updating your API key to check your connection.',
	value:         settings.apiKey,
	required: true,
	errors:        settings.getErrors('apiKey')
}) }}
#}

        <div id="url-settings" class="nested-fields ">
            {{ forms.autosuggestField({
                label: "AltText.ai API Key",
                instructions: 'Please click "Refresh credits count" in the utility page after updating your API key to check your connection.',
                id: 'apiKey',
                class: 'ltr',
                suggestEnvVars: true,
                suggestAliases: true,
                name: 'apiKey',
                value: settings.apiKey,
                errors: settings.getErrors('apiKey')
            }) }}
        </div>


 {{ forms.lightswitchField({
	label: "Send to AltText.ai for Alt Text Generations when saving with no alt text",
	instructions: "",
	id: 'generateOnSave',
	name: 'generateOnSave',
	on: settings.generateOnSave
}) }}




 {{ forms.lightswitchField({
	label: "Automatically use newly generated alt text",
	instructions: "If set to false you will be able to check the alt text before using",
	id: 'useAltTextImmediately',
	name: 'useAltTextImmediately',
	on: settings.useAltTextImmediately
}) }}


{{ forms.selectField({
        label: "Model type",
        options: { 
			"describe-detailed": "Elaborated model" ,
			"describe-regular": "Standard model" ,
			"describe-factual": "Matter-of-fact model" ,
			"succinct-describe-factual": "Concise model" ,
			"describe-terse": "Terse model (usually less than 120 characters)"
		},
        id: 'modelName',
        name: 'modelName',
        value: settings.modelName ?? 'describe-regular',
        errors: settings.getErrors('modelName')
    }) 
}}


{{ forms.selectField({
        label: "Language",
        options: { 
			"af":"Afrikaans",
"sq":"Albanian",
"am":"Amharic",
"ar":"Arabic",
"hy":"Armenian",
"as":"Assamese",
"ay":"Aymara",
"az":"Azerbaijani",
"bm":"Bambara",
"eu":"Basque",
"be":"Belarusian",
"bn":"Bengali",
"bho":"Bhojpuri",
"bs":"Bosnian",
"bg":"Bulgarian",
"ca":"Catalan",
"ceb":"Cebuano",
"zh-cn":"Chinese (Simplified)",
"zh-tw":"Chinese (Traditional)",
"co":"Corsican",
"hr":"Croatian",
"cs":"Czech",
"da":"Danish",
"dv":"Dhivehi",
"doi":"Dogri",
"nl":"Dutch",
"en":"English",
"eo":"Esperanto",
"et":"Estonian",
"ee":"Ewe",
"fil":"Filipino (Tagalog)",
"fi":"Finnish",
"fr":"French",
"fy":"Frisian",
"gl":"Galician",
"ka":"Georgian",
"de":"German",
"el":"Greek",
"gn":"Guarani",
"gu":"Gujarati",
"ht":"Haitian Creole",
"ha":"Hausa",
"haw":"Hawaiian",
"he":"Hebrew",
"hi":"Hindi",
"hmn":"Hmong",
"hu":"Hungarian",
"is":"Icelandic",
"ig":"Igbo",
"ilo":"Ilocano",
"id":"Indonesian",
"ga":"Irish",
"it":"Italian",
"ja":"Japanese",
"jv":"Javanese",
"kn":"Kannada",
"kk":"Kazakh",
"km":"Khmer",
"rw":"Kinyarwanda",
"gom":"Konkani",
"ko":"Korean",
"kri":"Krio",
"ku":"Kurdish",
"ckb":"Kurdish (Sorani)",
"ky":"Kyrgyz",
"lo":"Lao",
"la":"Latin",
"lv":"Latvian",
"ln":"Lingala",
"lt":"Lithuanian",
"lg":"Luganda",
"lb":"Luxembourgish",
"mk":"Macedonian",
"mai":"Maithili",
"mg":"Malagasy",
"ms":"Malay",
"ml":"Malayalam",
"mt":"Maltese",
"mi":"Maori",
"mr":"Marathi",
"mni-mtei":"Meiteilon (Manipuri)",
"lus":"Mizo",
"mn":"Mongolian",
"my":"Myanmar (Burmese)",
"ne":"Nepali",
"no":"Norwegian",
"ny":"Nyanja (Chichewa)",
"or":"Odia (Oriya)",
"om":"Oromo",
"ps":"Pashto",
"fa":"Persian",
"pl":"Polish",
"pt":"Portuguese",
"pa":"Punjabi",
"qu":"Quechua",
"ro":"Romanian",
"ru":"Russian",
"sm":"Samoan",
"sa":"Sanskrit",
"gd":"ScotsGaelic",
"nso":"Sepedi",
"sr":"Serbian",
"st":"Sesotho",
"sn":"Shona",
"sd":"Sindhi",
"si":"Sinhala (Sinhalese)",
"sk":"Slovak",
"sl":"Slovenian",
"so":"Somali",
"es":"Spanish",
"su":"Sundanese",
"sw":"Swahili",
"sv":"Swedish",
"tl":"Tagalog (Filipino)",
"tg":"Tajik",
"ta":"Tamil",
"tt":"Tatar",
"te":"Telugu",
"th":"Thai",
"ti":"Tigrinya",
"ts":"Tsonga",
"tr":"Turkish",
"tk":"Turkmen",
"ak":"Twi (Akan)",
"uk":"Ukrainian",
"ur":"Urdu",
"ug":"Uyghur",
"uz":"Uzbek",
"vi":"Vietnamese",
"cy":"Welsh",
"xh":"Xhosa",
"yi":"Yiddish",
"yo":"Yoruba",
"zu":"Zulu",
		},
        id: 'lang',
        name: 'lang',
        value: settings.lang ?? 'en',
        errors: settings.getErrors('lang')
    }) 
}}


{{ forms.textField({
	label:         "Hook security code"|t,
	id:            'securityCode',
	name:          'securityCode',
	instructions: '',
	required: true,
	value:         settings.securityCode,
	errors:        settings.getErrors('securityCode')
}) }}




{{ forms.selectField({
        label: "Use image preview url?",
		instructions: 'The plugin can generate a transformed version of your image before sending it to alttext.ai. This will use more resources to generate the transforms. This can also help when storing images with no public urls',
        options: { 
			"never":"Never",
			"always":"Always",
			"forLargeImages":"For large images only",
		},
        id: 'useImagePreviewUrl',
        name: 'useImagePreviewUrl',
        value: settings.useImagePreviewUrl ?? 'never',
        errors: settings.getErrors('useImagePreviewUrl')
    }) 
}}





 {{ forms.lightswitchField({
	label: "Do API calls async",
	instructions: "If you use async calls please make sure your queue is process automatically",
	id: 'asyncApi',
	name: 'asyncApi',
	on: settings.asyncApi
}) }}

{% set volumes = craft.app.getVolumes().getAllVolumes() %}
{% set customFields = [] %}
{% set customField = {
					label: 'Alt (default)',
					value: 'alt'
				} %}
{% set customFields = customFields|merge([customField]) %}
{% for volume in volumes %}
	{% set layout = volume.fieldLayout() %}
	{% for field in layout.getCustomFields() %}
		 {% if field.className == "craft\\fields\\PlainText" %}
				{% set customField = {
					label: field.name,
					value: field.handle
				}%}

				{% set customFields = customFields|merge([customField]) %}
		 {% endif %}
	{% endfor %}
{% endfor %}


{{ forms.selectField({
        label: "Field for Alt Text",
		instructions: "You'll need to resync your assets after changing this setting.",
        options: customFields,
        id: 'customField',
        name: 'customField',
        value: settings.customField ?? 'alt',
        errors: settings.getErrors('customField')
    }) 
}}


{#
<h2>Human review</h2>

<p>At the moment alttext.io's API will only send Human review hooks to the web hook url saved in your alttext.ai's account</p>
 {{ forms.lightswitchField({
	label: "Show options to request a human review of the alt text.",
	instructions: "",
	id: 'showHumanReview',
	name: 'showHumanReview',
	on: settings.showHumanReview
}) }}


<p>If this site's web hook is not set in your alttext.ai account then you'll need to manually request the update alt text.</p>
 {{ forms.lightswitchField({
	label: "This site's web hook is set in your alttext.ai account",
	instructions: "",
	id: 'webhookSetInAccount',
	name: 'webhookSetInAccount',
	on: settings.webhookSetInAccount
}) }}

#}

